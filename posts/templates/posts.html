{% extends "base.html" %}
{% block content %}
    <div class="row summary-container align-bottom">
        <div class="col-6">
            <h2>Posts</h2>
        </div>
        <div class="col-6 text-right">
            {% if user.is_authenticated %}
                <a href="{% url 'create_post' %}" class="btn btn-primary">New Post</a>
            {% else %}
                <div class="request-login" title="You must be logged in to report a bug.">
                    <p class="align-middle">Please <a href="{% url 'login' %}">Login</a> to create a post.</p>
                </div>
            {% endif %}
        </div>
    </div>
    <hr>
    {% for post in posts %}
        <div class="row summary-container">
            <div class="col-12 summary-header">
                <h3><a href="{% url 'post_detail' post.id %}">{{ post.title }}</a></h3>
                <p class="fine-print"><strong>Published:</strong> {{post.published_date}} by {{post.author}}</p>
            </div>
            <div class="col-12 summary-content">
                <p>{{ post.content|truncatewords:30 }} <a href="{% url 'post_detail' post.id %}">Read more</a></p>
            </div>
            <div class="col-12 summary-footer">
                <p><strong>Views:</strong> {{post.views}} | <strong>Tags:</strong> {{post.tags}}</p>
            </div>
        </div>
    {% endfor %}
{% endblock %}